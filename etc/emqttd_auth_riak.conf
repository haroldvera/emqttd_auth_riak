{riak_pool, [
  {pool_size, 8},
  {auto_reconnect, 3},

  %% Riakdb Opts
  {host, "192.168.0.5"},
  {port, 8087}
]}.

{superqueryriak,  [
  {bucket, "user"},
  {super_field, "groups"},
  {super_value, "SPUTNIK_ADMINISTRATOR"}
]}.

%% Authentication Query
{authqueryriak,  [
  {bucket, "user"},
  {password_field, "password"},
  {field, "username"},
  %% Hash Algorithm: plain, md5, sha, sha256, pbkdf2?
  {password_hash, sha256}
]}.

{mysql_pool, [
  %% pool options
  {pool_size, 8},
  {auto_reconnect, 1},

  %% mysql options
  {host,     "192.168.0.13"},
  {port,     3306},
  {user,     "root"},
  {password, "123123"},
  {database, "user"},
  {encoding, utf8},
  {keep_alive, true}
]}.

%% Variables: %u = username, %c = clientid, %a = ipaddress

%% Superuser Query
{superquery, "select is_superuser from mqtt_user where username = '%u' limit 1"}.

%% Authentication Query: select password only
{authquery, "select password from mqtt_user where username = '%u' limit 1"}.

%% hash algorithm: plain, md5, sha, sha256, pbkdf2?
{password_hash, sha256}.

%% select password with salt
%% {authquery, "select password, salt from mqtt_user where username = '%u'"}.

%% sha256 with salt prefix
%% {password_hash, {salt, sha256}}.

%% sha256 with salt suffix
%% {password_hash, {sha256, salt}}.

%% '%a' = ipaddress, '%u' = username, '%c' = clientid
%% Comment this query, the acl will be disabled
{aclquery, "select allow, ipaddr, username, clientid, access, topic from mqtt_acl where ipaddr = '%a' or username = '%u' or username = '$all' or clientid = '%c'"}.

%% If no ACL rules matched, return...
{acl_nomatch, allow}.

